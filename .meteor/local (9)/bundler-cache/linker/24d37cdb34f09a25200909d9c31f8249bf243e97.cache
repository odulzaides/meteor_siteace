[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nSession = Package.session.Session;\n$ = Package.jquery.$;\njQuery = Package.jquery.jQuery;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nDate = Package['es5-shim'].Date;\nparseInt = Package['es5-shim'].parseInt;\nECMAScript = Package.ecmascript.ECMAScript;\nmoment = Package['mrt:moment'].moment;\nMeteor = Package.meteor.Meteor;\nWebApp = Package.webapp.WebApp;\n_ = Package.underscore._;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nBlaze = Package.ui.Blaze;\nUI = Package.ui.UI;\nHandlebars = Package.ui.Handlebars;\nSpacebars = Package.spacebars.Spacebars;\nTemplate = Package.templating.Template;\nbabelHelpers = Package['babel-runtime'].babelHelpers;\nSymbol = Package['ecmascript-runtime'].Symbol;\nMap = Package['ecmascript-runtime'].Map;\nSet = Package['ecmascript-runtime'].Set;\nPromise = Package.promise.Promise;\nAccounts = Package['accounts-base'].Accounts;\nAccountsClient = Package['accounts-base'].AccountsClient;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\nHTML = Package.htmljs.HTML;\n\n","servePath":"/packages/global-imports.js"},{"type":"js","data":"(function(){\nTemplate.body.addContent((function() {\n  var view = this;\n  return [ HTML.Raw(\"<!-- navbar  - you will be putting the login functions here -->\\n\"), HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n        \", HTML.Raw('<div class=\"navbar-header\">\\n            <a class=\"navbar-brand\" href=\"#\">\\n                Site Ace\\n            </a>\\n\\n        </div>'), \"\\n        \", HTML.DIV({\n    \"class\": \"login\"\n  }, HTML.Raw(\"<br>\"), \"\\n            \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n\\n        \"), \"\\n    \"), \"\\n\"), \"\\n\\n\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n    \", HTML.H1(\"Welcome to the Website Share \", Blaze.View(\"lookup:username\", function() {\n    return Spacebars.mustache(view.lookup(\"username\"));\n  }), \" !\"), \"\\n    \", Spacebars.include(view.lookupTemplate(\"website_form\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"website_list\")), \"\\n\") ];\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"website_form\");\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ HTML.Comment(\" Only displays the 'add button' if someone is logged in.\"), \"\\n        \", HTML.A({\n      \"class\": \"btn btn-default js-toggle-website-form\",\n      href: \"#\"\n    }, \"\\n            \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-plus\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n        \"), \"\\n    \" ];\n  }), HTML.Raw('\\n    <div id=\"website_form\" class=\"hidden_div\">\\n        <form class=\"js-save-website-form\">\\n            <div class=\"form-group\">\\n                <label for=\"url\">Site address</label>\\n                <input type=\"text\" class=\"form-control\" id=\"url\" placeholder=\"http://www.mysite.com\">\\n            </div>\\n            <div class=\"form-group\">\\n                <label for=\"title\">Title</label>\\n                <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Mysite\">\\n            </div>\\n            <div class=\"form-group\">\\n                <label for=\"description\">Description</label>\\n                <input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"I found this site really useful for ...\">\\n            </div>\\n\\n            <button type=\"submit\" class=\"btn btn-default\">Submit</button>\\n        </form>\\n    </div>') ];\n}));\n\nTemplate.__checkName(\"website_list\");\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {\n  var view = this;\n  return HTML.OL(\"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"websites\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"website_item\")), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n\nTemplate.__checkName(\"website_item\");\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {\n  var view = this;\n  return HTML.LI({\n    style: \"border-top:1px solid gray;margin-top:2%;\"\n  }, \"\\n        \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), \"\\n\\n        \", HTML.P(\"\\n            \", Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  }), \"\\n        \"), \"\\n        \", HTML.P(\"\\n            Added by: \", HTML.SPAN({\n    style: \"color:rgb(72, 159, 218)\"\n  }, Blaze.View(\"lookup:getUser\", function() {\n    return Spacebars.mustache(view.lookup(\"getUser\"), view.lookup(\"createdBy\"));\n  })), \"  \\n            on: \", HTML.SPAN({\n    style: \"color:rgb(72, 159, 218)\"\n  }, Blaze.View(\"lookup:getDate\", function() {\n    return Spacebars.mustache(view.lookup(\"getDate\"), view.lookup(\"createdOn\"));\n  })), \" \\n            at \", HTML.SPAN({\n    style: \"color:rgb(72, 159, 218)\"\n  }, Blaze.View(\"lookup:getTime\", function() {\n    return Spacebars.mustache(view.lookup(\"getTime\"), view.lookup(\"createdOn\"));\n  })), \"\\n\\n            \", HTML.Raw(\"<!--// ADD THE NUMBER OF UP VOTES AND DOWN VOTES -->\"), \"\\n        \"), HTML.Raw('        \\n        <a href=\"#\" class=\"btn btn-default js-upvote\">\\n            <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n        </a>\\n        <a href=\"#\" class=\"btn btn-default js-downvote\">\\n            <span class=\"glyphicon glyphicon-minus\" aria-hidden=\"true\"></span>\\n        </a>\\n         '), HTML.P({\n    \"class\": \"up-down\"\n  }, \"\\n             \", HTML.Raw('<span class=\"glyphicon glyphicon-thumbs-up\"></span>'), \"     \", Blaze.View(\"lookup:upvote\", function() {\n    return Spacebars.mustache(view.lookup(\"upvote\"));\n  }), \"      \\n             \", HTML.Raw('<span class=\"glyphicon glyphicon-thumbs-down\"></span>'), \"  \", Blaze.View(\"lookup:downvote\", function() {\n    return Spacebars.mustache(view.lookup(\"downvote\"));\n  }), \"  \\n        \"), \"\\n       \\n    \");\n}));\n\n}).call(this);\n","servePath":"/template.siteace.js","sourceMap":{"version":3,"sources":["/template.siteace.js"],"names":[],"mappings":"YAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"/template.siteace.js","sourcesContent":["\nTemplate.body.addContent((function() {\n  var view = this;\n  return [ HTML.Raw(\"<!-- navbar  - you will be putting the login functions here -->\\n\"), HTML.NAV({\n    \"class\": \"navbar navbar-default\"\n  }, \"\\n    \", HTML.DIV({\n    \"class\": \"container-fluid\"\n  }, \"\\n        \", HTML.Raw('<div class=\"navbar-header\">\\n            <a class=\"navbar-brand\" href=\"#\">\\n                Site Ace\\n            </a>\\n\\n        </div>'), \"\\n        \", HTML.DIV({\n    \"class\": \"login\"\n  }, HTML.Raw(\"<br>\"), \"\\n            \", Spacebars.include(view.lookupTemplate(\"loginButtons\")), \"\\n\\n        \"), \"\\n    \"), \"\\n\"), \"\\n\\n\", HTML.DIV({\n    \"class\": \"container\"\n  }, \"\\n    \", HTML.H1(\"Welcome to the Website Share \", Blaze.View(\"lookup:username\", function() {\n    return Spacebars.mustache(view.lookup(\"username\"));\n  }), \" !\"), \"\\n    \", Spacebars.include(view.lookupTemplate(\"website_form\")), \"\\n    \", Spacebars.include(view.lookupTemplate(\"website_list\")), \"\\n\") ];\n}));\nMeteor.startup(Template.body.renderToDocument);\n\nTemplate.__checkName(\"website_form\");\nTemplate[\"website_form\"] = new Template(\"Template.website_form\", (function() {\n  var view = this;\n  return [ Blaze.If(function() {\n    return Spacebars.call(view.lookup(\"currentUser\"));\n  }, function() {\n    return [ HTML.Comment(\" Only displays the 'add button' if someone is logged in.\"), \"\\n        \", HTML.A({\n      \"class\": \"btn btn-default js-toggle-website-form\",\n      href: \"#\"\n    }, \"\\n            \", HTML.SPAN({\n      \"class\": \"glyphicon glyphicon-plus\",\n      \"aria-hidden\": \"true\"\n    }), \"\\n        \"), \"\\n    \" ];\n  }), HTML.Raw('\\n    <div id=\"website_form\" class=\"hidden_div\">\\n        <form class=\"js-save-website-form\">\\n            <div class=\"form-group\">\\n                <label for=\"url\">Site address</label>\\n                <input type=\"text\" class=\"form-control\" id=\"url\" placeholder=\"http://www.mysite.com\">\\n            </div>\\n            <div class=\"form-group\">\\n                <label for=\"title\">Title</label>\\n                <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Mysite\">\\n            </div>\\n            <div class=\"form-group\">\\n                <label for=\"description\">Description</label>\\n                <input type=\"text\" class=\"form-control\" id=\"description\" placeholder=\"I found this site really useful for ...\">\\n            </div>\\n\\n            <button type=\"submit\" class=\"btn btn-default\">Submit</button>\\n        </form>\\n    </div>') ];\n}));\n\nTemplate.__checkName(\"website_list\");\nTemplate[\"website_list\"] = new Template(\"Template.website_list\", (function() {\n  var view = this;\n  return HTML.OL(\"\\n        \", Blaze.Each(function() {\n    return Spacebars.call(view.lookup(\"websites\"));\n  }, function() {\n    return [ \"\\n            \", Spacebars.include(view.lookupTemplate(\"website_item\")), \"\\n        \" ];\n  }), \"\\n    \");\n}));\n\nTemplate.__checkName(\"website_item\");\nTemplate[\"website_item\"] = new Template(\"Template.website_item\", (function() {\n  var view = this;\n  return HTML.LI({\n    style: \"border-top:1px solid gray;margin-top:2%;\"\n  }, \"\\n        \", HTML.A({\n    href: function() {\n      return Spacebars.mustache(view.lookup(\"url\"));\n    }\n  }, Blaze.View(\"lookup:title\", function() {\n    return Spacebars.mustache(view.lookup(\"title\"));\n  })), \"\\n\\n        \", HTML.P(\"\\n            \", Blaze.View(\"lookup:description\", function() {\n    return Spacebars.mustache(view.lookup(\"description\"));\n  }), \"\\n        \"), \"\\n        \", HTML.P(\"\\n            Added by: \", HTML.SPAN({\n    style: \"color:rgb(72, 159, 218)\"\n  }, Blaze.View(\"lookup:getUser\", function() {\n    return Spacebars.mustache(view.lookup(\"getUser\"), view.lookup(\"createdBy\"));\n  })), \"  \\n            on: \", HTML.SPAN({\n    style: \"color:rgb(72, 159, 218)\"\n  }, Blaze.View(\"lookup:getDate\", function() {\n    return Spacebars.mustache(view.lookup(\"getDate\"), view.lookup(\"createdOn\"));\n  })), \" \\n            at \", HTML.SPAN({\n    style: \"color:rgb(72, 159, 218)\"\n  }, Blaze.View(\"lookup:getTime\", function() {\n    return Spacebars.mustache(view.lookup(\"getTime\"), view.lookup(\"createdOn\"));\n  })), \"\\n\\n            \", HTML.Raw(\"<!--// ADD THE NUMBER OF UP VOTES AND DOWN VOTES -->\"), \"\\n        \"), HTML.Raw('        \\n        <a href=\"#\" class=\"btn btn-default js-upvote\">\\n            <span class=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\\n        </a>\\n        <a href=\"#\" class=\"btn btn-default js-downvote\">\\n            <span class=\"glyphicon glyphicon-minus\" aria-hidden=\"true\"></span>\\n        </a>\\n         '), HTML.P({\n    \"class\": \"up-down\"\n  }, \"\\n             \", HTML.Raw('<span class=\"glyphicon glyphicon-thumbs-up\"></span>'), \"     \", Blaze.View(\"lookup:upvote\", function() {\n    return Spacebars.mustache(view.lookup(\"upvote\"));\n  }), \"      \\n             \", HTML.Raw('<span class=\"glyphicon glyphicon-thumbs-down\"></span>'), \"  \", Blaze.View(\"lookup:downvote\", function() {\n    return Spacebars.mustache(view.lookup(\"downvote\"));\n  }), \"  \\n        \"), \"\\n       \\n    \");\n}));\n"]}},{"type":"js","data":"(function(){\n\n/////////////////////////////////////////////////////////////////////////\n//                                                                     //\n// siteace.js                                                          //\n//                                                                     //\n/////////////////////////////////////////////////////////////////////////\n                                                                       //\nWebsites = new Mongo.Collection(\"websites\");                           // 1\n                                                                       //\nif (Meteor.isClient) {                                                 // 3\n                                                                       //\n    Session.set(\"websiteLimit\", 8);                                    // 5\n                                                                       //\n    lastScrollTop = 0;                                                 // 8\n    $(window).scroll(function (event) {                                // 9\n                                                                       //\n        // test if we are near the bottom of the window                //\n        if ($(window).scrollTop() + $(window).height() > $(document).height() - 100) {\n            // where are we in the page?                               //\n            var scrollTop = $(this).scrollTop();                       // 14\n            // test if we are going down                               //\n            if (scrollTop > lastScrollTop) {                           // 16\n                // yes we are heading down...                          //\n                console.log(\"We are heading down\");                    // 18\n                Session.set(\"websiteLimit\", Session.get(\"websiteLimit\") + 4);\n            }                                                          //\n                                                                       //\n            lastScrollTop = scrollTop;                                 // 22\n        }                                                              //\n    });                                                                //\n                                                                       //\n    Accounts.ui.config({                                               // 27\n        passwordSignupFields: \"USERNAME_AND_EMAIL\"                     // 28\n    });                                                                //\n                                                                       //\n    /////                                                              //\n    // template helpers                                                //\n    /////                                                              //\n                                                                       //\n    // helper function that returns all available websites             //\n    Template.website_list.helpers({                                    // 38\n        websites: function () {                                        // 39\n            return Websites.find({});                                  // 40\n        }                                                              //\n                                                                       //\n    });                                                                //\n                                                                       //\n    Template.body.helpers({                                            // 45\n        username: function () {                                        // 46\n            if (Meteor.user()) {                                       // 47\n                return Meteor.user().username;                         // 48\n                //return Meteor.user().emails[0].address;              //\n            } else {                                                   //\n                    return \"anonymous internet user\";                  // 53\n                }                                                      //\n        }                                                              //\n    });                                                                //\n    Template.website_item.helpers({                                    // 57\n        getUser: function (user_id) {                                  // 58\n            var user = Meteor.users.findOne({ _id: user_id });         // 59\n            // console.log(user);                                      //\n            if (user) {                                                // 61\n                return user.username;                                  // 62\n            } else {                                                   //\n                return \"Anonymous internet user\";                      // 64\n            }                                                          //\n        },                                                             //\n        getDate: function (createdOn) {                                // 67\n                                                                       //\n            var date = createdOn; //new Date();                        // 69\n            var createDate = moment(date).format(\"MM/DD/YY\");          // 70\n            return createDate;                                         // 71\n        },                                                             //\n        getTime: function (createdOn) {                                // 73\n            var createTime = moment(createdOn).format(\"h:hh A\");       // 74\n            return createTime;                                         // 75\n        }                                                              //\n    });                                                                //\n                                                                       //\n    /////                                                              //\n    // template events                                                 //\n    /////                                                              //\n                                                                       //\n    Template.website_item.events({                                     // 85\n        \"click .js-upvote\": function (event) {                         // 86\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)             //\n            var website_id = this._id;                                 // 89\n            console.log(\"Up voting website with id \" + website_id);    // 90\n            //                                                         //\n            // TODO - put the code in here to add a vote to a website!\n            Websites.update({ _id: website_id }, { $inc: { upvote: +1 } }); // for a vote UP\n                                                                       //\n            return false; // prevent the button from reloading the page\n        },                                                             //\n        \"click .js-downvote\": function (event) {                       // 97\n                                                                       //\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)             //\n            var website_id = this._id;                                 // 101\n            console.log(\"Down voting website with id \" + website_id);  // 102\n                                                                       //\n            // TODO - put the code in here to remove a vote from a website!\n            Websites.update({ _id: website_id }, { $inc: { downvote: +1 } });\n                                                                       //\n            return false; // prevent the button from reloading the page\n        }                                                              //\n    });                                                                //\n                                                                       //\n    Template.website_form.events({                                     // 111\n        \"click .js-toggle-website-form\": function (event) {            // 112\n            $(\"#website_form\").toggle('slow');                         // 113\n        },                                                             //\n        \"submit .js-save-website-form\": function (event) {             // 115\n                                                                       //\n            // here is an example of how to get the url out of the form:\n            var url = event.target.url.value;                          // 118\n            var title = event.target.title.value;                      // 119\n            var description = event.target.description.value;          // 120\n            console.log(\"The url they entered is: \" + url);            // 121\n                                                                       //\n            //  TODO - put your website saving code in here!           //\n            if (Meteor.user()) {                                       // 124\n                var date = new Date();                                 // 125\n                Websites.insert({                                      // 126\n                    url: url,                                          // 127\n                    title: title,                                      // 128\n                    description: description,                          // 129\n                    createdOn: date,                                   // 130\n                    createdBy: Meteor.user()._id,                      // 131\n                    upVote: 0,                                         // 132\n                    downVote: 0                                        // 133\n                });                                                    //\n                                                                       //\n                $(\"#url\").val(\" \");                                    // 137\n                $(\"#title\").val(\" \");                                  // 138\n                $(\"#description\").val(\" \");                            // 139\n                $(\"#website_form\").toggle('slow');                     // 140\n                                                                       //\n                return false;                                          // 142\n            }                                                          //\n                                                                       //\n            return false; // stop the form submit from reloading the page\n        }                                                              //\n    });                                                                //\n}                                                                      //\nvar date = Date();                                                     // 151\n                                                                       //\nif (Meteor.isServer) {                                                 // 153\n    // start up function that creates entries in the Websites databases.\n    Meteor.startup(function () {                                       // 155\n        // code to run on server at startup                            //\n        if (!Websites.findOne()) {                                     // 157\n            console.log(\"No websites yet. Creating starter data.\");    // 158\n            Websites.insert({                                          // 159\n                title: \"Goldsmiths Computing Department\",              // 160\n                url: \"http://www.gold.ac.uk/computing/\",               // 161\n                description: \"This is where this course was developed.\",\n                createdOn: Date(),                                     // 163\n                upvote: 0,                                             // 164\n                downvote: 0                                            // 165\n            });                                                        //\n            Websites.insert({                                          // 167\n                title: \"University of London\",                         // 168\n                url: \"http://www.londoninternational.ac.uk/courses/undergraduate/goldsmiths/bsc-creative-computing-bsc-diploma-work-entry-route\",\n                description: \"University of London International Programme.\",\n                createdOn: Date(),                                     // 171\n                upvote: 0,                                             // 172\n                downvote: 0                                            // 173\n            });                                                        //\n            Websites.insert({                                          // 175\n                title: \"Coursera\",                                     // 176\n                url: \"http://www.coursera.org\",                        // 177\n                description: \"Universal access to the world’s best education.\",\n                createdOn: Date(),                                     // 179\n                upvote: 0,                                             // 180\n                downvote: 0                                            // 181\n            });                                                        //\n            Websites.insert({                                          // 183\n                title: \"Google\",                                       // 184\n                url: \"http://www.google.com\",                          // 185\n                description: \"Popular search engine.\",                 // 186\n                createdOn: Date(),                                     // 187\n                upvote: 0,                                             // 188\n                downvote: 0                                            // 189\n            });                                                        //\n        }                                                              //\n    });                                                                //\n}                                                                      //\n/////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n","servePath":"/siteace.js","sourceMap":{"version":3,"sources":["/siteace.js"],"names":[],"mappings":"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","file":"/siteace.js","sourcesContent":["Websites = new Mongo.Collection(\"websites\");\n\nif (Meteor.isClient) {\n\n    Session.set(\"websiteLimit\", 8);\n\n\n    lastScrollTop = 0;\n    $(window).scroll(function (event) {\n\n        // test if we are near the bottom of the window\n        if ($(window).scrollTop() + $(window).height() > $(document).height() - 100) {\n            // where are we in the page?\n            var scrollTop = $(this).scrollTop();\n            // test if we are going down\n            if (scrollTop > lastScrollTop) {\n                // yes we are heading down...\n                console.log(\"We are heading down\");\n                Session.set(\"websiteLimit\", Session.get(\"websiteLimit\") + 4);\n            }\n\n            lastScrollTop = scrollTop;\n        }\n\n    })\n\n    Accounts.ui.config({\n        passwordSignupFields: \"USERNAME_AND_EMAIL\"\n    });\n\n\n    /////\n    // template helpers\n    /////\n\n\n    // helper function that returns all available websites\n    Template.website_list.helpers({\n        websites: function () {\n            return Websites.find({});\n        },\n\n    });\n\n    Template.body.helpers({\n        username: function () {\n            if (Meteor.user()) {\n                return Meteor.user().username;\n                //return Meteor.user().emails[0].address;\n\n            }\n            else {\n                return \"anonymous internet user\";\n            }\n        }\n    });\n    Template.website_item.helpers({\n        getUser:function(user_id){\n            var user = Meteor.users.findOne({_id:user_id});\n            // console.log(user);\n            if(user){\n                return user.username;\n            } else {\n                return \"Anonymous internet user\"\n            }\n        },\n        getDate:function(createdOn){\n            \n            var date = createdOn; //new Date();\n            var createDate = moment(date).format(\"MM/DD/YY\");\n            return createDate;\n        },\n        getTime:function(createdOn){\n            var createTime = moment(createdOn).format(\"h:hh A\");\n            return createTime;\n        }\n    });\n\n\n\n    /////\n    // template events\n    /////\n\n    Template.website_item.events({\n        \"click .js-upvote\": function (event) {\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)\n            var website_id = this._id;\n            console.log(\"Up voting website with id \" + website_id);\n            //\n            // TODO - put the code in here to add a vote to a website!\n            Websites.update({_id: website_id},{$inc: {upvote: +1}}); // for a vote UP\n\n            return false;// prevent the button from reloading the page\n        },\n        \"click .js-downvote\": function (event) {\n\n            // example of how you can access the id for the website in the database\n            // (this is the data context for the template)\n            var website_id = this._id;\n            console.log(\"Down voting website with id \" + website_id);\n\n            // TODO - put the code in here to remove a vote from a website!\n            Websites.update({_id: website_id},{$inc: {downvote: +1}});\n\n            return false;// prevent the button from reloading the page\n        }\n    })\n\n    Template.website_form.events({\n        \"click .js-toggle-website-form\": function (event) {\n            $(\"#website_form\").toggle('slow');\n        },\n        \"submit .js-save-website-form\": function (event) {\n\n            // here is an example of how to get the url out of the form:\n            var url = event.target.url.value;\n            var title = event.target.title.value;\n            var description = event.target.description.value;\n            console.log(\"The url they entered is: \" + url);\n\n            //  TODO - put your website saving code in here!\n            if (Meteor.user()){\n                var date = new Date();\n                Websites.insert({\n                    url:url,\n                    title:title,\n                    description:description,\n                    createdOn:date,\n                    createdBy:Meteor.user()._id,\n                    upVote:0,\n                    downVote:0\n                });\n\n                \n                $(\"#url\").val(\" \");\n                $(\"#title\").val(\" \");\n                $(\"#description\").val(\" \");\n                $(\"#website_form\").toggle('slow');\n\n                return false;\n\n            }\n\n            return false;// stop the form submit from reloading the page\n\n        }\n    });\n}\nvar date = Date();\n\nif (Meteor.isServer) {\n    // start up function that creates entries in the Websites databases.\n    Meteor.startup(function () {\n        // code to run on server at startup\n        if (!Websites.findOne()) {\n            console.log(\"No websites yet. Creating starter data.\");\n            Websites.insert({\n                title: \"Goldsmiths Computing Department\",\n                url: \"http://www.gold.ac.uk/computing/\",\n                description: \"This is where this course was developed.\",\n                createdOn:Date(),\n                upvote:0,\n                downvote:0\n            });\n            Websites.insert({\n                title: \"University of London\",\n                url: \"http://www.londoninternational.ac.uk/courses/undergraduate/goldsmiths/bsc-creative-computing-bsc-diploma-work-entry-route\",\n                description: \"University of London International Programme.\",\n                createdOn:Date(),\n                upvote:0,\n                downvote:0\n            });\n            Websites.insert({\n                title: \"Coursera\",\n                url: \"http://www.coursera.org\",\n                description: \"Universal access to the world’s best education.\",\n                createdOn:Date(),\n                upvote:0,\n                downvote:0\n            });\n            Websites.insert({\n                title: \"Google\",\n                url: \"http://www.google.com\",\n                description: \"Popular search engine.\",\n                createdOn:Date(),\n                upvote:0,\n                downvote:0\n            });\n        }\n    });\n}\n"]}}]